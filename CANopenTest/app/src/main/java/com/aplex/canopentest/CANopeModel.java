package com.aplex.canopentest;

import android.util.Log;

/**
 * Created by aplex on 2018/3/21.
 */

public class CANopeModel implements CANopenContract.IbaseModel {
    private String TAG = "CANopeModel";
    private CANopen canOpen = new CANopen();
    private String[] startCmd = {"test", "start"};   //打开调试模式
    private String[] stopCmd = {"test", "stop"};     //关闭调试模式
    private String[] nodeIDCmd = {"4", "r", "0x1005", "0", "u32"};  //读取CAN节点
    private String[] senddataCmd = {"test", "send", "12", "34"};
    String[] recvCmd = {"test", "recv"};  //接收

    @Override
    public String readNodeID() {
        return canOpen.canopenUtils(nodeIDCmd);
    }

    @Override
    public void setDataValue(int data1, int data2) {
        senddataCmd[2] = String.valueOf(data1);
        senddataCmd[3] = String.valueOf(data2);
    }

    @Override
    public void sendData() {
        canOpen.canopenUtils(senddataCmd);
    }

    @Override
    public void startTest() {
        canOpen.canopenUtils(startCmd);
    }

    @Override
    public void startRecvTest() {
        canOpen.canopenUtils(recvCmd);
    }

    @Override
    public void stopTest() {
        canOpen.canopenUtils(stopCmd);
    }

    @Override
    public int canopenFifoOpen(String path) {
        return canOpen.canopenFifoOpen(path);
    }

    @Override
    public byte[] canopenFifoRead(int fd) {
        return canOpen.canopenFifoRead(fd);
        //return 1;
    }

    @Override
    public void canopenFifoClose(int fd) {
        canOpen.canopenFifoClose(fd);
    }


}
